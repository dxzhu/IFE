<!DOCTYPE html>
<html lang="zh-cn">

<head>
    <meta charset="UTF-8">
    <title>任务四：听指令的小方块（一）</title>
    <link rel="stylesheet" href="app.css">
    <!-- <script src="app.js"></script> -->
    <style type="text/css">
    table {
        border-collapse: collapse;
    }
    
    td {
        border: 1px solid #aaa;
        width: 40px;
        height: 40px;
    }
    
    .box {
        background-color: blue;
    }
    
    .box-top {
        padding-top: 10px;
    }
    
    .box-bottom {
        padding-bottom: 10px;
    }
    
    .box-left {
        padding-left: 10px;
    }
    
    .box-right {
        padding-right: 10px;
    }
    
    .box span {
        display: block;
        width: 100%;
        height: 100%;
        background-color: red;
    }
    </style>
</head>

<body>
    <table>
        <tbody></tbody>
    </table>
    <input type="text" name="">
    <button>click</button>
    <!-- <div id="content">
		<div id="game">
			<div id="top"></div>
			<div id="left"></div>
			<table></table>
		</div>
		<div class="clear"></div>	
		<div id="step">
			<input type="text"><button>执行</button>
		</div>
	</div> -->
    <script type="text/javascript">
    var game = document.getElementById('game'),
        step = document.getElementById('step'),
        table = document.getElementsByTagName('tbody')[0],
        input = document.querySelector('input'),
        btn = document.querySelector('button'),
        Event = {
            addEvent: function(element, type, handler) {
                if (element.addEventListener) {
                    element.addEventListener(type, handler, false)
                } else if (element.attachEvent) {
                    element.attachEvent('on' + type, handler)
                } else {
                    element['on' + type] = handler;
                }
            },
            removeHandler: function(element, type, handler) {
                if (element.removeEventListener) {
                    element.removeEventListener(type, handler, false)
                } else if (element.detachEvent) {
                    element.detachEvent('on' + type, handler)
                } else {
                    element['on' + type] = null;
                }
            }
        },
        Game = {
            way: 'top',
            i: 0,
            j: 0,
            flag: true,
            topGo: function() {
                if (this.i === 0) {
                    this.flag = false;
                } else {
                    this.flag = true;
                    this.i--;
                }
            },
            bottomGo: function() {
                if (this.i === 9) {
                    this.flag = false;
                } else {
                    this.flag = true;
                    this.i++
                }
            },
            leftGo: function() {
                if (this.j = 0) {
                    this.flag = false;
                } else {
                    this.flag = true;
                    this.j--
                }
            },
            rightGo: function() {
                if (this.j === 9) {
                    this.flag = false;
                } else {
                    this.flag = true;
                    this.j++
                }
            },
            turnLeft: function() {
                var tr = document.querySelectorAll('tr');
                if (this.way === 'top') {
                    tr[this.i].children[this.j].className = 'box box-left';
                    this.way = 'left';
                } else if (this.way === 'right') {
                    tr[this.i].children[this.j].className = 'box box-top';
                    this.way = 'top';
                } else if (this.way === 'left') {
                    tr[this.i].children[this.j].className = 'box box-bottom';
                    this.way = 'bottom';
                } else {
                    tr[this.i].children[this.j].className = 'box box-right';
                    this.way = 'right';
                }

            },
            turnRight: function() {
                var tr = document.querySelectorAll('tr');
                if (this.way === 'top') {
                    tr[this.i].children[this.j].className = 'box box-right';
                    this.way = 'right';
                } else if (this.way === 'right') {
                    tr[this.i].children[this.j].className = 'box box-bottom';
                    this.way = 'bottom';
                } else if (this.way === 'left') {
                    tr[this.i].children[this.j].className = 'box box-top';
                    this.way = 'top';
                } else {
                    tr[this.i].children[this.j].className = 'box box-left';
                    this.way = 'left';
                }
            },
            turnBack: function() {
                var tr = document.querySelectorAll('tr');
                if (this.way === 'top') {
                    tr[this.i].children[this.j].className = 'box box-bottom';
                    this.way = 'bottom';
                } else if (this.way === 'right') {
                    tr[this.i].children[this.j].className = 'box box-left';
                    this.way = 'left';
                } else if (this.way === 'left') {
                    tr[this.i].children[this.j].className = 'box box-right';
                    this.way = 'right';
                } else {
                    tr[this.i].children[this.j].className = 'box box-top';
                    this.way = 'top';
                }
            },
            go: function() {
                var tr = document.querySelectorAll('tr');
                if (this.way === 'top') {
                    var str = tr[this.i].children[this.j].className;
                    this.topGo()
                    if (this.flag) {
                        tr[this.i].children[this.j].className = str;
                        tr[this.i + 1].children[this.j].className = null;
                    } else {
                        alert('超出范围')
                    }
                } else if (this.way === 'right') {
                    var str = tr[this.i].children[this.j].className;
                    this.rightGo()
                    if (this.flag) {
                        tr[this.i].children[this.j].className = str;
                        tr[this.i].children[this.j - 1].className = null;
                    } else {
                        alert('超出范围')
                    }
                } else if (this.way === 'left') {
                    var str = tr[this.i].children[this.j].className;
                    this.leftGo();
                    if (this.flag) {
                        tr[this.i].children[this.j].className = str;
                        tr[this.i].children[this.j + 1].className = null;
                    } else {
                        alert('超出范围')
                    }
                } else {
                    var str = tr[this.i].children[this.j].className;
                    this.bottomGo()
                    if (this.flag) {
                        tr[this.i].children[this.j].className = str;
                        tr[this.i - 1].children[this.j].className = null;
                    } else {
                        alert('超出范围')
                    }
                }
            }
        }

    function tamplate() {
        for (var i = 0; i < 10; i++) {
            var tr = document.createElement('tr')
            table.appendChild(tr)
            for (var j = 0; j < 10; j++) {
                var td = document.createElement('td'),
                    span = document.createElement('span');
                td.appendChild(span);
                tr.appendChild(td);
            }
        }
        document.getElementsByTagName('tr')[0].getElementsByTagName('td')[0].className = 'box box-top'
    }

    function getVal() {
        var data = input.value;
        if (data === 'GO') {
            Game.go()
        } else if (data === 'TUN LEF') {
            Game.turnLeft()
        } else if (data === 'TUN RIG') {
            Game.turnRight()
        } else if (data === 'TUN BAC') {
            Game.turnBack()
        } else if (data === '') {
            alert('指令不能为空');
        } else {
            alert('指令非法');
        }
    }

    function init() {
        tamplate();
        Event.addEvent(btn, 'click', getVal)
    }
    init();
    </script>
</body>

</html>
